# High-Probability Scalping Configuration
# Targeting 80%+ win rate for day trading
# Optimized for forex pairs on M3-M5 timeframes

mode: demo  # Change to 'live' for real trading
symbol: "EURUSD"
timeframe: "M3"  # 3-minute for scalping
magic: 80808080  # Unique magic number for this strategy

# Risk Management - Confident sizing with precise entries
risk:
  account_risk_per_trade: 0.015  # FIX: Reduced to 1.5%
  max_spread_points: 25
  max_open_positions: 1
  max_daily_loss_pct: 0.03  # FIX: Reduced to 3% daily limit
  max_lot_size: 3.0  # FIX: Capped at 3 lots

# Trade Parameters - WIDER SL/TP for stability
# 5 pip SL was getting hit by market noise - need more room
trade:
  sl_pips: 15   # Wider SL (was 8 - too tight)
  tp_pips: 22   # Larger TP for 1.5:1 R:R
  trailing_stop:
    enabled: true
    start_pips: 5   # Start trailing earlier (was 10 - too late)
    trail_pips: 3   # Trail tighter (was 7 - gave back too much)
  # Advanced exit rules
  exit_on_ema_cross: true      # Exit if 2+ candles close below EMA(9)
  exit_on_structure_break: false # Disabled
  partial_profit:
    enabled: false              # Let winners run to TP
    profit_pct: 0.10
    close_pct: 0.50
    move_sl_to_profit: true

# Strategy Configuration
strategy:
  name: "price_action"
  fast_ema: 9   # Fast EMA for trend
  slow_ema: 21  # Slow EMA for trend confirmation
  breakout_lookback: 10

  # Scalping-specific settings
  min_confirmations: 6  # Require 6/7 confirmations (increased from 5)
  use_dynamic_sl_tp: true  # Use ATR-based SL/TP
  atr_sl_multiplier: 1.5  # SL = 1.5 * ATR
  atr_tp_multiplier: 1.0  # TP = 1.0 * ATR
  cooldown_minutes: 5  # Wait 5 min between trades (was 3)
  strong_rejection_enabled: false  # FIX: Disabled due to 0% win rate

  # FIX 16: High Precision Mode - MUST BE ENABLED
  high_precision_mode: true       # Enable strict filtering for 85% win rate
  min_adx: 20.0                   # Market must be trending (ADX > 20)
  max_rsi_buy: 70.0               # Don't buy when overbought
  min_rsi_buy: 40.0               # Don't buy when oversold
  max_rsi_sell: 60.0              # Don't sell when oversold
  min_rsi_sell: 30.0              # Don't sell when overbought
  max_spread_pips: 2.0            # Max spread allowed (slightly relaxed from 1.5)

# Session Filter - CRITICAL: Only trade during good sessions
# Sydney session (score 10/100) caused all the losses!
session:
  enabled: true
  london_only: false
  overlap_only: false
  avoid_news_times: true
  min_session_quality: 40  # Don't trade below this score (40/100)

# News Filter
news_filter:
  enabled: true
  minutes_before: 30
  minutes_after: 15
  provider: "full"

# Logging
logging:
  level: "INFO"
